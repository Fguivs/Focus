<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Épicos 亗 🌱</title>
<link rel="icon" type="image/png" href="https://i.ibb.co/Ps4yK7xy/Picsart-25-02-25-14-28-21-078.jpg">
<link rel="stylesheet" href="estilos.css">
<link rel="manifest" href="manifest.json">
<style id="dynamic-cursor-style"></style>

</head>
<body>

<div id="maintenance-overlay" class="update-overlay hidden">
  <div class="update-box">
    <div id="maintenance-icon" class="update-icon" style="cursor: pointer;">⚠️</div>
    <h2>Página em Manutenção</h2>
    <p>
      Algumas melhorias e testes estão sendo realizados para deixar tudo ainda melhor para todos nós. Voltaremos em breve!
    </p>
    <form id="maintenance-form" action="javascript:void(0);">
      <div class="password-wrapper hidden" style="max-width: 300px; margin: 20px auto 0;">
        <input type="password" id="maintenance-password" class="auth-input" placeholder="Acesso Restrito">
      </div>
    </form>
  </div>
</div>

<!-- Container de autenticação -->
<div id="auth-container">
  <div class="auth-form">
    <h2>Grupo Épicos 亗 🌱</h2>
    <div id="login-form">
      <input type="text" id="login-username" class="auth-input" placeholder="Seu nome" autocomplete="username">
      <div class="password-wrapper">
  <input type="password" id="login-password" class="auth-input" placeholder="Senha" autocomplete="current-password">
  <button type="button" id="toggle-password-btn" class="toggle-password" style="display: none;">Ver</button>
</div>
      <div id="login-message" class="auth-message"></div>
      <button id="login-btn" class="auth-btn">Entrar</button>
      <div class="auth-links">
        <span id="forgot-password-link" class="auth-link">Esqueceu a senha?</span>
      </div>
    </div>
    
	<div id="forgot-password-form" class="hidden">
  <h3>Recuperação de Senha</h3>
  <p style="margin-bottom: 20px; font-size: 0.9rem; color: #7f8c8d;">
    Para começar, informe seu nome e responda à sua pergunta secreta.
  </p>
  <input type="text" id="forgot-username" class="auth-input" placeholder="Seu nome" autocomplete="username">
  <label for="secret-answer" style="display: block; text-align: left; margin-bottom: 10px; font-weight: 500;">
    Qual é o nome do primeiro pet que você já teve (ou tem)?
  </label>
  <input type="text" id="secret-answer" class="auth-input" placeholder="Resposta secreta">
  <div id="forgot-message" class="auth-message"></div>
  <button id="verify-answer-btn" class="auth-btn">Verificar Resposta</button>
  <button id="cancel-forgot-password" class="auth-link" style="margin-top: 15px;">Voltar para o Login</button>
</div>
	
    <div id="change-password-form" class="hidden">
      <input type="password" id="new-password" class="auth-input" placeholder="Nova senha">
      <input type="password" id="confirm-new-password" class="auth-input" placeholder="Confirme a nova senha">
      <div class="password-strength">
        <div id="password-strength-bar" class="password-strength-bar"></div>
      </div>
      <div id="password-message" class="auth-message"></div>
      <button id="change-password-btn" class="auth-btn secondary">Salvar nova senha</button>
     <button class="btn-cancelar" onclick="showLoginForm()">Cancelar</button>
    </div>
	
	<div id="secret-question-form" class="hidden">
  <h3>Recuperação de Senha</h3>
  <p style="margin-bottom: 20px; font-size: 0.9rem; color: #7f8c8d;">
    Para proteger sua conta, vamos criar um método de recuperação.
  </p>
  <label for="setup-secret-answer" style="display: block; text-align: left; margin-bottom: 10px; font-weight: 500;">
    Qual é o nome do primeiro pet que você já teve (ou tem)?
  </label>
  <input type="text" id="setup-secret-answer" class="auth-input" placeholder="Digite a resposta aqui">
  <button id="save-secret-answer-btn" class="auth-btn">Salvar e Continuar</button>
</div>
	
  </div>
</div>

<div id="main-content" class="hidden">

  <div class="container">
    <header>
      <h1>Épicos 亗 🌱</h1>
      <div id="dataHoje"></div>
	  <div id="relogio"></div>
      <div id="info-semana"></div>
	  
	  <div class="botoes-info-container">
        <button id="btn-instrucoes" class="botao-info">📜 Instruções</button>
        <button id="btn-advertencias" class="botao-info">⚠️ Advertências</button>
      </div>
      </header>
	  
	 <div id="painel-pessoal-container">
  
  <div class="perfil-header">
  <h2 id="saudacao-pessoal">Olá, <span id="nome-usuario-saudacao">Membro</span>!</h2>
  <div id="avatar-display-pessoal" class="avatar-container-pessoal" title="Editar meu avatar">
  </div>
</div>
  
  <button id="notificacoes-btn" class="botao-info">
  📮 Notificações
  <span id="notificacoes-contador" class="hidden">0</span>
</button>

  <div id="indicador-equipe-pessoal" class="info-box hidden">
    Equipe Desconhecida
  </div>
  
  <button id="btn-abrir-envio-moedas" class="botao-info" style="background-color: #27ae60;">
    🎁 Envio de Moedas Diárias
  </button>

  <div class="info-box">
    <div id="indicador-moedas-pessoal" class="info-box-valor">
      💰 <span>0</span>
    </div>
    <div class="info-box-label">Moedas</div>
  </div>
  
  <button id="botao-painel-usuario" class="botao-info hidden">
    ⚙️ Painel do Usuário
  </button>

</div>

    <div class="vantagem-container">
  <h2>🎁 Código Secreto</h2>
  <p class="vantagem-descricao">
    Se você recebeu um código de recompensa do líder, insira-o abaixo para resgatar suas moedas!
  </p>
  <div id="redeem-code-section" style="max-width: 400px; margin: 0 auto;">
    <input type="text" id="secret-code-input" class="painel-input" placeholder="Digite o código aqui" maxlength="6">
    <button id="redeem-code-btn" class="painel-btn btn-adicionar" style="margin-top: 10px; width: 100%;">Resgatar Moedas</button>
  </div>
</div>

    <div id="secao-instrucoes" class="secao-fullscreen hidden">
      <button class="botao-fechar-secao">X</button>
      <div class="secao-conteudo">
        </div>
    </div>

    <div id="secao-advertencias" class="secao-fullscreen hidden">
      <button class="botao-fechar-secao">X</button>
      <div class="secao-conteudo">
        </div>
    </div

    </header>
    
	<div class="aniversariantes-container">
  <h2 style="text-align: center;">🎂 Aniversariantes do Mês</h2>
  <div style="text-align: center; margin-bottom: 20px;">
    <button id="btn-ver-lista-aniversarios" class="botao-info">📋 Ver Lista de Aniversários</button>
</div>
  <div id="aniversariantes-hoje" class="aniversariantes-hoje">
    <!-- Conteúdo gerado dinamicamente -->
  </div>
  <div id="proximos-aniversarios" class="proximos-aniversarios">
    <!-- Conteúdo gerado dinamicamente -->
  </div>
</div>
	
    <div class="stats-container">
      <div class="global-stats">
        <div id="contadorGeral">0 épicos focaram hoje!</div>
        <div class="progresso-container">
          <div id="progresso-barra"></div>
		  <div id="marcador-arvore" class="marcador-arvore" style="display: none;" title="Meta para a Árvore Épica">
    <div class="linha-vertical"></div>
    <div class="emoji-arvore">🌳</div>
</div>
  </div>
  <div id="mensagem-todos-focados" class="hidden" style="margin-top: 15px; font-weight: bold; color: #9b59b6; font-size: 1.1rem;"></div>
</div>
      </div>
    
    <div class="competicao-container">
      <h2>🏆 Competição de Equipes</h2>
      <div class="equipes-competicao">
        <div class="equipe-competicao" id="podio-abelha">
          <h3>🐝 Abelha</h3>
          <div class="score" id="ranking-abelha">0</div>
          <div>Vitórias</div>
        </div>
        <div class="equipe-competicao" id="podio-joaninha">
          <h3>🐞 Joaninha</h3>
          <div class="score" id="ranking-joaninha">0</div>
          <div>Vitórias</div>
        </div>
        <div class="equipe-competicao" id="podio-vagalume">
          <h3>💡 Vaga-lume</h3>
          <div class="score" id="ranking-vagalume">0</div>
          <div>Vitórias</div>
        </div>
      </div>
      <p style="margin-top: 15px; font-size: 0.9em; color: #7f8c8d;">
	  <strong>Foque no mínimo 40 minutos, e cuide da fazenda do grupo 2 vezes para marcar seu ponto!</strong><br>
        Competição semanal: Segunda a Sábado.<br>
        A equipe com mais pontos ao final da competição ganha +1 ponto no ranking de equipes.<br>
        Em caso de empate, todas as equipes empatadas ganham +1 ponto.<br>
      </p>
    </div>
	
		<div class="container-top5">
  <div class="ranking-top-container">
    <h2>🌟 Top 5 Épicos da Semana</h2>
	 <p class="ranking-desempate">O critério de desempate do TOP 5 utiliza a velocidade. Ou seja, os membros que focam primeiro, ficam em primeiro!</p>
    <div id="ranking-top-lista" class="ranking-lista">
      <!-- Ranking será gerado dinamicamente aqui -->
    </div>
    <div class="ranking-mensagem">Parabéns aos mais focados entre todos os Épicos!</div>
  </div>
</div>
	
	<div class="vantagem-container">
  <h2>🎮 Jogo da Vantagem</h2>
  <p class="vantagem-descricao">
  <div id="leader-advantage-controls" class="hidden" style="margin-bottom: 20px;">
    <button id="leader-test-button" class="painel-btn btn-adicionar">Testar Jogos</button>
    <div id="leader-test-panel" class="hidden">
        <h4>Selecione um jogo para testar:</h4>
        <ul id="leader-game-list">
            </ul>
    </div>
</div>
    Disponível de Segunda a Sexta. Para que sua equipe garanta os pontos de bônus no Sábado, todos os membros ativos devem concluir o desafio até às 23:59 de sexta!
  </p>
  
  <div style="text-align: center; margin-bottom: 20px;">
    <button id="ver-placar-btn" class="auth-btn" style="background-color: #3498db;" onclick="abrirPlacarVantagem()">Ver Placar</button>
  </div>
  
  <p class="vantagem-jogo-atual" id="vantagem-jogo-nome"></p>

  <div class="vantagem-game-wrapper">
    <div id="advantage-game-board"></div>

    <div id="vantagem-locked-overlay" class="hidden">
      <div class="lock-icon">✅</div>
      <p id="vantagem-lock-message">Desafio concluído esta semana! Volte na segunda-feira para o próximo.</p>
    </div>
  </div>
</div>
	
		  <div id="resumo-semana-container" class="mural-container">
      <h2>📰 Resumo da Semana</h2>
      <p class="mural-descricao">
        Acompanhe em tempo real as principais conquistas e eventos da semana! Este feed é zerado toda segunda-feira.
      </p>
      <div class="mural-scroll-wrapper"> 
        <div id="feed-semanal-cards">
          <div class="carregando">Carregando feed da semana...</div>
        </div>
      </div>
    </div>
	
    <div class="grupos-container" id="grupos-container">
      <!-- Conteúdo será gerado dinamicamente pelo JavaScript -->
    </div>
	
	<div id="condominio-container" class="arvore-epica-container">
  <h2>🏡 Condomínio Épicos</h2>
  <div id="condominio-info-header">
      <strong id="nome-membro-condominio"></strong>
      <div id="saldo-moedas-container">
          <span class="moeda-emoji">💰</span>
          <span id="saldo-moedas">0</span>
      </div>
  </div>
  <p class="arvore-explicacao">Veja abaixo sua casa no condomínio épicos.</p>

  <div style="text-align: center; margin-bottom: 25px;">
    <button class="botao-info" onclick="openModal('info-moedas-modal')">
      ℹ️ Como ganhar moedas?
    </button>
  </div>

  <div class="tree-display">
    <div class="tree-sky day-mode">
      <div class="stars-container"></div>
    </div>
    <div id="sol-condominio" class="sky-object"><img src="https://i.ibb.co/TD9sxMNF/Sol.png" alt="Sol"></div>
    <div id="lua-condominio" class="sky-object"><img src="https://i.ibb.co/93f7Ptjr/Lua.png" alt="Lua"></div>
    <img class="nuvem nuvem-1" src="https://i.ibb.co/rfsS1Tp9/nuvem.png" alt="Nuvem">
    <img class="nuvem nuvem-2" src="https://i.ibb.co/rfsS1Tp9/nuvem.png" alt="Nuvem">
    <img class="nuvem nuvem-3" src="https://i.ibb.co/rfsS1Tp9/nuvem.png" alt="Nuvem">
    
    <div class="ground"></div>

    <div id="lote-pessoal-container">
        </div>
  </div>

  <div class="botoes-info-container" style="margin-top: 25px;">
  <button id="btn-abrir-loja" class="botao-info">🏪 Abrir Loja</button>
  <button id="btn-abrir-inventario" class="botao-info">🎒 Meu Inventário</button>
  <button id="btn-ver-condominio" class="botao-info">🏘️ Ver Condomínio</button>
  <button id="btn-ranking-imobiliario" class="botao-info">🏆 Ranking Imobiliário</button>
</div>
</div>
    
	<!-- Quadro de Folgas -->
<div class="folgas-container">
  
  <h2>📅 Quadro de Folgas</h2>
  <p class="folga-explicacao">No dia da sua folga, sua caixa de seleção será marcada automaticamente, sem que você precise focar ou cuidar da fazenda.</p>
<button id="change-folga-btn" class="rectangular-button" title="Alterar minha folga">Trocar Folga</button>
  
  <div class="dias-container">
    <div class="dia-col">
      <h3>Segunda</h3>
      <div class="lista-membros" id="segunda"></div>
    </div>
    <div class="dia-col">
      <h3>Terça</h3>
      <div class="lista-membros" id="terca"></div>
    </div>
    <div class="dia-col">
      <h3>Quarta</h3>
      <div class="lista-membros" id="quarta"></div>
    </div>
    <div class="dia-col">
      <h3>Quinta</h3>
      <div class="lista-membros" id="quinta"></div>
    </div>
    <div class="dia-col">
      <h3>Sexta</h3>
      <div class="lista-membros" id="sexta"></div>
    </div>
    <div class="dia-col">
      <h3>Sábado</h3>
      <div class="lista-membros" id="sabado"></div>
    </div>
    <div class="dia-col">
      <h3>Domingo</h3>
      <div class="lista-membros" id="domingo"></div>
    </div>
  </div>
</div>
    
    <!-- SEÇÃO ATUALIZADA: Árvore Épica com espaço idêntico ao código de referência -->
    <div id="secao-arvore-epica" class="arvore-epica-container">
      <h2>🌳 Árvore Épica</h2>

      <p class="arvore-explicacao">
        A árvore cresce com o esforço coletivo! Se <strong>10 ou mais épicos</strong> focarem no mesmo dia, a árvore avança um dia em sua jornada de crescimento. Caso contrário, a sequência é quebrada. Vamos cultivar nosso foco juntos!
      </p>
      
      <div class="tree-display">
        <div class="tree-sky day-mode">
          <div class="stars-container"></div>
        </div>
        <div id="sol" class="sky-object"><img src="https://i.ibb.co/TD9sxMNF/Sol.png" alt="Sol"></div>
        <div id="lua" class="sky-object"><img src="https://i.ibb.co/93f7Ptjr/Lua.png" alt="Lua"></div>
        <img class="nuvem nuvem-1" src="https://i.ibb.co/rfsS1Tp9/nuvem.png" alt="Nuvem">
        <img class="nuvem nuvem-2" src="https://i.ibb.co/rfsS1Tp9/nuvem.png" alt="Nuvem">
        <img class="nuvem nuvem-3" src="https://i.ibb.co/rfsS1Tp9/nuvem.png" alt="Nuvem">
        <img class="nuvem nuvem-4" src="https://i.ibb.co/rfsS1Tp9/nuvem.png" alt="Nuvem">
        <img class="nuvem nuvem-5" src="https://i.ibb.co/rfsS1Tp9/nuvem.png" alt="Nuvem">
        <img class="nuvem nuvem-6" src="https://i.ibb.co/rfsS1Tp9/nuvem.png" alt="Nuvem">
        <div class="ground"></div>
        <img id="seed" class="tree-image" src="https://i.ibb.co/7xsw9ZVd/semente.png" alt="Semente">
        <img id="sprout" class="tree-image" src="https://i.ibb.co/WNcWgWgn/broto.png" alt="Broto" style="display: none;">
        <img id="tree" class="tree-image" src="https://i.ibb.co/0jS2220Z/arvore.png" alt="Árvore" style="display: none;">
        <img id="flowers" class="tree-image" src="https://i.ibb.co/FrMst3S/flores.png" alt="Flores" style="display: none;">
        <img id="fruits" class="tree-image" src="https://i.ibb.co/9k6HjBFk/frutos.png" alt="Frutos" style="display: none;">
      </div>
      
      <div class="tree-info">
        <div class="stage-info" id="stage-name">Semente</div>
        <div class="stage-desc" id="stage-desc">A jornada começa com um único dia de foco. Vamos plantar nossa semente e cultivar nossa dedicação diária!</div>
        
        <div class="arvore-status-diario">
          <div id="status-focado" class="status-badge">✅ 0 épicos focaram hoje</div>
          <div id="status-nao-focado" class="status-badge">❌ 0 épicos ainda não focaram</div>
        </div>

        <div class="progresso-consecutivo">
          <strong>Dias consecutivos: <span id="dias-consecutivos">0</span></strong><br>
          <span id="proxima-fase"></span>
        </div>
      </div>
    </div>
	
	<!-- Seção do Mural de Mensagens -->
    <div class="mural-container">
  <h2>✍️ Mural da Escrita</h2>
  <div class="mural-actions">
    <button id="open-composer-btn">Escrever Mensagem</button>
  </div>
  <div class="mural-scroll-wrapper"> 
    <div id="mural-mensagens">
    </div>
  </div>
  </div>
    
   <div class="nossas-informacoes">
  <h2>💖 Nossas Informações</h2>
  
  <div class="carrossel-wrapper">
    <div class="carrossel-controles">
  <button class="controle-btn" onclick="mudarSlide(-1)">❮</button>
  <button class="controle-btn" id="botao-pausa" onclick="togglePausa()">⏸</button>
  <button class="controle-btn" onclick="mudarSlide(1)">❯</button>
</div>
    
    <div class="carrossel">
      <div class="carrossel-container" id="carrossel-container">
        <!-- Cards serão inseridos aqui pelo JavaScript -->
      </div>
    </div>
  </div>
  
<div class="progresso-indicador" style="margin-top: 15px;">
  <div class="progresso-indicador-barra" id="progresso-indicador-barra"></div>
</div>
  
  <div class="carrossel-indicadores" id="carrossel-indicadores">
    <!-- Indicadores serão gerados aqui -->
  </div>
</div>

<div id="secao-desenho" class="vantagem-container">
  <h2>🎨 Solte sua Imaginação</h2>
  <p class="vantagem-descricao">
    Um espaço livre para cada equipe desenhar e se expressar. Membros só podem editar a tela da sua própria equipe.
  </p>
  <div class="carrossel-wrapper">
    <div class="carrossel-controles">
      <button class="controle-btn" onclick="mudarSlideDesenho(-1)">❮</button>
      <button class="controle-btn" id="botao-pausa-desenho" onclick="togglePausaDesenho()">⏸</button>
      <button class="controle-btn" onclick="mudarSlideDesenho(1)">❯</button>
    </div>
    <div class="carrossel-container" id="carrossel-container-desenho">
  <div class="card-desenho" id="card-desenho-abelha">
    <h3 class="titulo-tela-desenho abelha">🐝 Tela da Equipe Abelha</h3>
    <div id="preview-container-abelha" class="preview-container">
      <canvas id="preview-canvas-abelha"></canvas>
      <div class="loading-overlay hidden"></div>
      <div class="overlay-texto">Clique para Desenhar</div>
    </div>
    <div class="desenho-info-rodape">
  <button class="botao-autores" onclick="abrirModalAutores('abelha')">Ver Autores</button>
  <div class="avaliacao-desenho">
    <div id="like-container-abelha" class="reacao-display" onclick="abrirModalAvaliadores('abelha', 'likes')" title="Ver quem curtiu">
      <button id="like-btn-abelha" onclick="event.stopPropagation(); avaliarDesenho('abelha', 'like')">👍</button>
      <span class="like-count">0</span>
    </div>
    <div id="dislike-container-abelha" class="reacao-display" onclick="abrirModalAvaliadores('abelha', 'dislikes')" title="Ver quem não curtiu">
      <button id="dislike-btn-abelha" onclick="event.stopPropagation(); avaliarDesenho('abelha', 'dislike')">👎</button>
      <span class="dislike-count">0</span>
    </div>
  </div>
</div>
  </div>
  <div class="card-desenho" id="card-desenho-joaninha">
    <h3 class="titulo-tela-desenho joaninha">🐞 Tela da Equipe Joaninha</h3>
    <div id="preview-container-joaninha" class="preview-container">
      <canvas id="preview-canvas-joaninha"></canvas>
      <div class="loading-overlay hidden"></div>
      <div class="overlay-texto">Clique para Desenhar</div>
    </div>
    <div class="desenho-info-rodape">
  <button class="botao-autores" onclick="abrirModalAutores('joaninha')">Ver Autores</button>
  <div class="avaliacao-desenho">
    <div id="like-container-joaninha" class="reacao-display" onclick="abrirModalAvaliadores('joaninha', 'likes')" title="Ver quem curtiu">
      <button id="like-btn-joaninha" onclick="event.stopPropagation(); avaliarDesenho('joaninha', 'like')">👍</button>
      <span class="like-count">0</span>
    </div>
    <div id="dislike-container-joaninha" class="reacao-display" onclick="abrirModalAvaliadores('joaninha', 'dislikes')" title="Ver quem não curtiu">
      <button id="dislike-btn-joaninha" onclick="event.stopPropagation(); avaliarDesenho('joaninha', 'dislike')">👎</button>
      <span class="dislike-count">0</span>
    </div>
  </div>
</div>
  </div>
  <div class="card-desenho" id="card-desenho-vagalume">
    <h3 class="titulo-tela-desenho vagalume">💡 Tela da Equipe Vaga-lume</h3>
    <div id="preview-container-vagalume" class="preview-container">
      <canvas id="preview-canvas-vagalume"></canvas>
      <div class="loading-overlay hidden"></div>
      <div class="overlay-texto">Clique para Desenhar</div>
    </div>
    <div class="desenho-info-rodape">
  <button class="botao-autores" onclick="abrirModalAutores('vagalume')">Ver Autores</button>
  <div class="avaliacao-desenho">
    <div id="like-container-vagalume" class="reacao-display" onclick="abrirModalAvaliadores('vagalume', 'likes')" title="Ver quem curtiu">
      <button id="like-btn-vagalume" onclick="event.stopPropagation(); avaliarDesenho('vagalume', 'like')">👍</button>
      <span class="like-count">0</span>
    </div>
    <div id="dislike-container-vagalume" class="reacao-display" onclick="abrirModalAvaliadores('vagalume', 'dislikes')" title="Ver quem não curtiu">
      <button id="dislike-btn-vagalume" onclick="event.stopPropagation(); avaliarDesenho('vagalume', 'dislike')">👎</button>
      <span class="dislike-count">0</span>
    </div>
  </div>
</div>
  </div>
</div>
  </div>
  <div class="progresso-indicador" style="margin-top: 15px;">
    <div class="progresso-indicador-barra" id="progresso-indicador-barra-desenho"></div>
  </div>
  <div class="carrossel-indicadores" id="carrossel-indicadores-desenho"></div>
</div>
<div id="desenho-modal" class="modal-overlay">
<button class="close-modal-btn" onclick="fecharModalDesenho()">✖</button>

  <div id="desenho-toolbar" class="desenho-toolbar">
    <div class="ferramentas-wrapper">

      <div class="tool-group">
  <label for="cor-pincel">Cor:</label>
<input type="color" id="cor-pincel" value="#000000">
</div>

      <div class="tool-group">
        <label for="tamanho-pincel">Tamanho:</label>
        <span id="valor-pincel">5</span>
        <input type="range" id="tamanho-pincel" min="1" max="50" value="5">
      </div>

      <div class="tool-group">
        <button id="pincel-btn" class="painel-btn ativo" title="Pincel">✏️</button>
        <button id="borracha-btn" class="painel-btn" title="Borracha">Borracha</button>
		<button id="conta-gotas-btn" class="painel-btn" title="Conta-gotas (Pegar Cor)">💧</button>
      </div>

      <div class="tool-group">
        <button id="desfazer-btn" class="painel-btn" title="Desfazer">↩️</button>
        <button id="refazer-btn" class="painel-btn" title="Refazer">↪️</button>
      </div>

      <div class="tool-group">
        <button id="limpar-tela-btn" class="painel-btn btn-remover">Limpar Tudo</button>
      </div>

    </div>
    <button id="toggle-toolbar-btn" class="toggle-toolbar-btn">⬇️</button>
  </div>

  <canvas id="tela-desenho-fullscreen"></canvas>
</div>

    <div class="medalha-info">
      <h2>🏅 Sistema de Medalhas</h2>
      <div class="medalhas-grid">
        <div class="medalha-item">
          <div class="medalha-emoji">🔥</div>
          <div class="medalha-nome">Fagulha</div>
          <div class="medalha-dias">3 dias</div>
        </div>
        <div class="medalha-item">
          <div class="medalha-emoji">👑</div>
          <div class="medalha-nome">Lenda</div>
          <div class="medalha-dias">10 dias</div>
        </div>
        <div class="medalha-item">
          <div class="medalha-emoji">🌟</div>
          <div class="medalha-nome">Constante</div>
          <div class="medalha-dias">30 dias</div>
        </div>
        <div class="medalha-item" id="medalha-diamante">
          <div class="medalha-emoji">💎</div>
          <div class="medalha-nome">Diamante</div>
          <div class="medalha-dias">60 dias</div>
        </div>
        <div class="medalha-item">
          <div class="medalha-emoji">🚀</div>
          <div class="medalha-nome">Foguete</div>
          <div class="medalha-dias">120 dias</div>
        </div>
        <div class="medalha-item">
          <div class="medalha-emoji">🏆</div>
          <div class="medalha-nome">Troféu</div>
          <div class="medalha-dias">150 dias</div>
        </div>
        <div class="medalha-item">
          <div class="medalha-emoji">🔮</div>
          <div class="medalha-nome">Bola de cristal</div>
          <div class="medalha-dias">240 dias</div>
        </div>
        <div class="medalha-item">
          <div class="medalha-emoji">🌞</div>
          <div class="medalha-nome">Solar</div>
          <div class="medalha-dias">365 dias</div>
        </div>
		
		<div class="medalha-item">
       <div class="medalha-emoji">🐉</div>
       <div class="medalha-nome">Mítico</div>
       <div class="medalha-dias">550 dias</div>
     </div>
     <div class="medalha-item">
       <div class="medalha-emoji">🎃</div>
       <div class="medalha-nome">Horripilante</div>
       <div class="medalha-dias">730 dias</div>
     </div>
     <div class="medalha-item">
       <div class="medalha-emoji">💣</div>
       <div class="medalha-nome">Poder Destrutivo</div>
       <div class="medalha-dias">900 dias</div>
     </div>
     <div class="medalha-item">
       <div class="medalha-emoji">😇</div>
       <div class="medalha-nome">Angelical</div>
       <div class="medalha-dias">1100 dias</div>
     </div>
     <div class="medalha-item">
       <div class="medalha-emoji">💠</div>
       <div class="medalha-nome">Primordial</div>
       <div class="medalha-dias">1460 dias</div>
     </div>
     <div class="medalha-item">
       <div class="medalha-emoji">♾️</div>
       <div class="medalha-nome">Eterno</div>
       <div class="medalha-dias">1825 dias</div>
     </div>
		
      </div>
    </div>
	
	<div id="secao-ociosos" class="vantagem-container hidden">
  <h2>👥 Membros Ociosos da Semana</h2>
  <p class="vantagem-descricao" id="ociosos-descricao">
    A lista abaixo mostra os membros que focaram menos de 4 vezes nesta semana (de Segunda a Sábado).
  </p>
  <div id="lista-ociosos" class="ociosos-lista-container">
    <div class="ociosos-placeholder">Nenhum membro ocioso esta semana.</div>
  </div>
</div>

  </div>
  
  <div id="popup"></div>
  <canvas id="confetti-canvas"></canvas>
  
  <!-- Painel Secreto (adicionado no final do body) -->
  <div id="painel-secreto">
    <div class="painel-header">
      <h2>Painel de Controle Secreto</h2>
      <button class="painel-btn btn-fechar" onclick="togglePainelSecreto(false)">Fechar</button>
    </div>

<div class="painel-section">
  <h3>🗑️ Reset do Dia</h3>
  <button class="painel-btn btn-remover" style="width:100%" onclick="resetarDia()">Desmarcar Todos e Zerar o Dia</button>
  <p style="font-size:0.8rem; margin-top:10px; color:#e74c3c">
    ATENÇÃO: Esta ação irá desmarcar todos os checkboxes do dia atual e zerar o contador de foco do dia. Os pontos semanais e streaks NÃO serão alterados.
  </p>
</div>

    <div class="painel-section">
      <h3>⚠️ Reset Geral</h3>
      <button class="painel-btn btn-remover" style="width:100%" onclick="resetarTudo()">Resetar Todos os Dados</button>
      <p style="font-size:0.8rem; margin-top:10px; color:#e74c3c">
        ATENÇÃO: Esta ação apagará todo o histórico e não pode ser desfeita!
      </p>
    </div>
  </div>

  <!-- Elementos de áudio -->
  <audio id="som-check" src="https://cdn.pixabay.com/audio/2025/07/04/audio_9dcd152e4d.mp3" preload="auto"></audio>
  <audio id="som-conquista" src="https://cdn.pixabay.com/audio/2025/04/23/audio_d131e87049.mp3" preload="auto"></audio>
  <audio id="som-envio" src="https://cdn.pixabay.com/audio/2024/08/20/audio_a95d316f28.mp3" preload="auto"></audio>
  <audio id="som-reacao" src="https://cdn.pixabay.com/audio/2025/07/09/audio_a9c21b6107.mp3" preload="auto"></audio>
  
  <!-- Elementos de áudio para jogo sequência de cores -->
  
  <audio id="simon-sound-0" src="https://cdn.pixabay.com/audio/2024/08/02/audio_783fe31424.mp3" preload="auto"></audio>
  <audio id="simon-sound-1" src="https://cdn.pixabay.com/audio/2022/05/10/audio_4c68c4facc.mp3" preload="auto"></audio>
  <audio id="simon-sound-2" src="https://cdn.pixabay.com/audio/2022/03/10/audio_ef129ff863.mp3" preload="auto"></audio>
  <audio id="simon-sound-3" src="https://cdn.pixabay.com/audio/2023/02/23/audio_be301496db.mp3" preload="auto"></audio>
  
  </div>
  
    <div id="popup-message" class="popup-container">
    <h3 id="popup-title"></h3>
    <p id="popup-text"></p>
  </div>
  
  <div id="change-password-modal" class="modal-overlay">
  <div class="modal-content">
    <h3>Trocar Senha</h3>
    <input type="password" id="logged-in-new-password" class="auth-input" placeholder="Nova senha">
    <input type="password" id="logged-in-confirm-password" class="auth-input" placeholder="Confirme a nova senha">
    <button id="save-new-password-btn" class="auth-btn">Salvar Nova Senha</button>
    <button class="btn-cancelar" onclick="closeModal('change-password-modal')">Cancelar</button>
  </div>
</div>

<div id="change-secret-modal" class="modal-overlay">
  <div class="modal-content">
    <h3>Trocar Pergunta Secreta</h3>
    <label for="new-secret-answer" style="display: block; text-align: left; margin-bottom: 10px;">
      Qual é o nome do primeiro pet que você já teve (ou tem)?
    </label>
    <input type="text" id="new-secret-answer" class="auth-input" placeholder="Sua nova resposta">
    <button id="save-new-secret-btn" class="auth-btn">Salvar Nova Resposta</button>
    <button class="btn-cancelar" onclick="closeModal('change-secret-modal')">Cancelar</button>
  </div>
</div>
  
  <div id="change-folga-modal" class="modal-overlay">
  <div class="modal-content">
    <h3>Alterar Dia de Folga</h3>
    <p style="margin-bottom: 20px; font-size: 0.9rem; color: #7f8c8d;">
      Você só pode alterar sua folga <strong>uma vez por semana</strong>. Domingo é folga coletiva e não pode ser selecionado.
    </p>
    <select id="select-new-folga" class="auth-input">
      <option value="segunda-feira">Segunda-feira</option>
      <option value="terça-feira">Terça-feira</option>
      <option value="quarta-feira">Quarta-feira</option>
      <option value="quinta-feira">Quinta-feira</option>
      <option value="sexta-feira">Sexta-feira</option>
      <option value="sábado">Sábado</option>
    </select>
    <button id="save-new-folga-btn" class="auth-btn">Salvar Alteração</button>
    <button class="btn-cancelar" onclick="closeModal('change-folga-modal')">Cancelar</button>
  </div>
</div>
  
<div id="message-composer-modal" class="modal-overlay">
  <div id="composer-card" class="composer-card">
    <div class="composer-header">
      <button id="composer-color-btn" title="Mudar cor do card">Escolha a cor</button>
      <div id="composer-color-palette" class="hidden"></div>
      <button id="composer-close-btn" title="Fechar">✖</button>
    </div>

    <div class="composer-toolbar">
        <button class="toolbar-btn" onclick="formatText('bold')" title="Negrito"><b>B</b></button>
        <button class="toolbar-btn" onclick="formatText('italic')" title="Itálico"><i>I</i></button>
        <button class="toolbar-btn" onclick="formatText('underline')" title="Sublinhado"><u>U</u></button>
        <button class="toolbar-btn" onclick="formatText('justifyLeft')" title="Alinhar à Esquerda">☰</button>
        <button class="toolbar-btn" onclick="formatText('justifyCenter')" title="Centralizar"><b>&#9776;</b></button>
        <button class="toolbar-btn" onclick="formatText('justifyRight')" title="Alinhar à Direita"><b>&#9780;</b></button>
    </div>

    <div id="composer-textarea" class="auth-input" contenteditable="true" placeholder="O que você está pensando?"></div>

    <div class="composer-footer">
      <div class="composer-author-info">
        <div id="composer-author" class="mensagem-autor"></div>
        <div id="composer-timestamp" class="mensagem-data"></div>
      </div>
      <div class="composer-actions">
        <div class="anonymous-option">
          <input type="checkbox" id="composer-anonymous-check">
          <label for="composer-anonymous-check">Postar como Anônimo</label>
        </div>
        <button id="composer-send-btn">Enviar</button>
      </div>
    </div>
  </div>
</div>

<div id="message-viewer-modal" class="modal-overlay">
  <div id="viewer-card" class="composer-card">
    <div class="composer-header">
      <div class="viewer-info-wrapper">
        <div id="viewer-author" class="mensagem-autor"></div>
        <div id="viewer-timestamp" class="mensagem-data"></div>
      </div>
      <button id="viewer-close-btn" title="Fechar">✖</button>
    </div>
    
    <div id="viewer-text" class="mensagem-texto expanded"></div>

    <div id="viewer-reacoes-container" class="reacoes-display-container" style="display: none; margin-top: 15px;">
      </div>
    
    <div class="reacao-seletor-bar hidden" style="margin-top: 15px;">
      </div>

    <div class="composer-footer" style="margin-top: 15px;">
       </div>
  </div>
</div>

<div id="confirm-delete-modal" class="modal-overlay">
  <div class="modal-content" style="max-width: 400px;">
    <h3>Confirmar Exclusão</h3>
    <p style="margin-bottom: 25px;">Você tem certeza que deseja excluir esta mensagem permanentemente?</p>
    <div style="display: flex; justify-content: space-around; gap: 15px;">
      <button class="btn-cancelar" style="flex: 1;" onclick="closeModal('confirm-delete-modal')">Cancelar</button>
      <button id="confirm-delete-btn" class="auth-btn" style="flex: 1; background-color: #e74c3c;">Excluir</button>
    </div>
  </div>
</div>
  
<div id="control-panel-modal" class="modal-overlay">
  <div class="modal-content" style="max-width: 800px; width: 95%; max-height: 90vh; overflow-y: auto;">
    <div class="painel-header">
      <h2>Painel de Controle</h2>
      <button class="painel-btn btn-fechar" onclick="closeModal('control-panel-modal')">Fechar</button>
    </div>

    <div class="painel-section">
      <h3>Adicionar Novo Membro</h3>
      <div class="controle-pontos" style="grid-template-columns: 1fr 1fr 1fr auto; gap: 15px;">
        <input type="text" id="new-member-name" class="painel-input" placeholder="Nome do Membro">
        <select id="new-member-team" class="painel-input">
          <option value="abelha">Equipe Abelha</option>
          <option value="joaninha">Equipe Joaninha</option>
          <option value="vagalume">Equipe Vaga-lume</option>
        </select>
        <select id="new-member-role" class="painel-input">
          <option value="membro">Membro</option>
          <option value="lider-equipe">Líder de Equipe</option>
        </select>
        <button id="add-member-btn" class="painel-btn btn-adicionar">Adicionar</button>
      </div>
      <div id="new-member-result" style="margin-top: 15px; font-weight: bold; color: #27ae60;"></div>
    </div>

    <div class="painel-section">
      <h3>Remover Membro</h3>
      <div class="controle-pontos" style="grid-template-columns: 1fr auto; gap: 15px;">
        <select id="select-member-to-remove" class="painel-input"></select>
        <button id="remove-member-btn" class="painel-btn btn-remover">Remover</button>
      </div>
    </div>
	
	<div class="painel-section">
  <h3>Ações Semanais</h3>
  <div class="user-panel-actions">
    <button id="btn-abrir-avaliacao-lideres" class="user-panel-btn hidden" style="border-color: #f1c40f; color: #f1c40f;">
      👑 Avaliação Semanal de Líderes
    </button>
    <button id="btn-abrir-recompensa-equipe" class="user-panel-btn hidden" style="border-color: #2ecc71; color: #2ecc71;">
      🏆 Recompensa da Equipe
    </button>
  </div>
</div>
	
	<div class="painel-section lider-geral-only">
  <h3>🌴 Membros de Férias</h3>
  <p style="font-size:0.9rem; margin-bottom:15px; color:#555;">
    Marque os membros que estão de férias. Eles não poderão marcar o foco e não serão contados na média de pontos da equipe durante a competição.
  </p>
  <div id="ferias-lista-membros" class="ociosos-lista-container" style="max-height: 250px;">
    </div>
</div>
	
	<div class="painel-section lider-geral-only">
  <h3>📊 Ajuste Manual de Pontos</h3>
  <p style="font-size:0.9rem; margin-bottom:15px; color:#555;">
    Adicione ou remova pontos de uma equipe. A ação será registrada no Resumo da Semana.
  </p>
  <div class="controle-pontos" style="grid-template-columns: 2fr 1fr auto auto; gap: 15px;">
    <select id="select-equipe-ajuste" class="painel-input">
      <option value="">Selecione uma equipe...</option>
      <option value="abelha">Equipe Abelha</option>
      <option value="joaninha">Equipe Joaninha</option>
      <option value="vagalume">Equipe Vaga-lume</option>
    </select>
    <input type="number" id="input-pontos-ajuste" class="painel-input" placeholder="Pontos">
    <button id="btn-adicionar-pontos" class="painel-btn btn-adicionar">Adicionar</button>
    <button id="btn-remover-pontos" class="painel-btn btn-remover">Remover</button>
  </div>
</div>
	
		<div class="painel-section lider-geral-only"> <h3>🎲 Forçar Recriação do Quiz</h3>
  <button class="painel-btn btn-remover" style="width:100%; background-color: #f39c12;" onclick="forcarRegeracaoQuiz()">Recriar Quiz da Semana</button>
  <p style="font-size:0.8rem; margin-top:10px; color:#e67e22">
    Use isso se o quiz semanal apresentar algum erro ou se você alterou as informações de um membro e quer que elas apareçam nas perguntas.
  </p>
</div>

    <div class="painel-section lider-geral-only">
      <h3>🗑️ Limpar Resumo da Semana</h3>
      <button id="limpar-feed-btn" class="painel-btn btn-remover" style="width:100%">Apagar Todos os Eventos do Feed</button>
      <p style="font-size:0.8rem; margin-top:10px; color:#c0392b;">
        <strong>Atenção:</strong> Esta ação apagará permanentemente todos os cards de eventos do "Resumo da Semana". Use caso a limpeza automática de segunda-feira falhe.
      </p>
    </div>

    <div class="painel-section lider-geral-only">
      <h3>🗑️ Limpar Mural de Mensagens</h3>
      <button id="limpar-mural-btn" class="painel-btn btn-remover" style="width:100%">Apagar Todas as Mensagens do Mural</button>
      <p style="font-size:0.8rem; margin-top:10px; color:#c0392b;">
        <strong>Atenção:</strong> Esta ação apagará permanentemente todas as mensagens do mural. Use caso a limpeza automática de segunda-feira falhe.
      </p>
    </div>

    <div class="painel-section lider-geral-only">
      <h3>🚀 Forçar Atualização de Versão</h3>
      <button id="trigger-update-btn" class="painel-btn btn-remover" style="width:100%; background-color: #f39c12;">Ativar Tela de Atualização para Todos</button>
      <p style="font-size:0.8rem; margin-top:10px; color:#e67e22;">
        Use isso após fazer uma grande mudança no código. Todos os membros serão forçados a atualizar a página.
      </p>
    </div>
	<div class="painel-section lider-geral-only">
  <h3>🛠️ Modo de Manutenção</h3>
  <p style="font-size:0.9rem; margin-bottom:15px; color:#555;">
    Ative este modo para bloquear o acesso de todos os usuários enquanto você realiza testes ou atualizações importantes.
  </p>
  <button id="toggle-maintenance-btn" class="painel-btn btn-remover" style="width:100%; background-color: #e67e22;">
    Ativar Modo de Manutenção
  </button>
</div>
    <div class="painel-section lider-geral-only">
      <h3>🔄 Sincronização Global</h3>
      <p style="font-size:0.9rem; margin-bottom:15px; color:#555;">
        Use este botão se um membro foi adicionado/removido ou se a interface de alguém parece desatualizada. Isso forçará a atualização da página para todos os usuários online.
      </p>
      <button id="force-refresh-btn" class="painel-btn btn-adicionar" style="width:100%; background-color: #3498db;">Forçar Atualização para Todos</button>
    </div>
	
	<div class="painel-section lider-geral-only">
  <h3>🎲 Ordem dos Jogos da Vantagem</h3>
  <p style="font-size:0.9rem; margin-bottom:15px; color:#555;">
    Arraste os jogos para definir a ordem em que eles aparecerão nas próximas semanas. O primeiro jogo da lista será o desta semana.
  </p>
  
  <ul id="game-order-list" class="game-order-list">
    </ul>

  <button id="save-game-order-btn" class="painel-btn btn-adicionar" style="width:100%; margin-top: 15px;">Salvar Nova Ordem</button>
</div>
	
  </div>
</div>
  
  <div id="new-member-success-modal" class="modal-overlay">
  <div class="modal-content">
    <h3>✅ Membro Adicionado com Sucesso!</h3>
    <p class="modal-description">Repasse os dados de login para o novo membro. Use os botões para copiar as informações.</p>
    
    <div class="copy-info-container">
      <strong>Usuário:</strong>
      <div class="copy-field">
        <span id="success-username"></span>
        <button onclick="copyToClipboard(document.getElementById('success-username').innerText, 'Usuário')">Copiar</button>
      </div>
    </div>
    
    <div class="copy-info-container">
      <strong>Senha Provisória:</strong>
      <div class="copy-field">
        <span id="success-password"></span>
        <button onclick="copyToClipboard(document.getElementById('success-password').innerText, 'Senha')">Copiar</button>
      </div>
    </div>

    <button class="auth-btn" style="margin-top: 25px;" onclick="closeModal('new-member-success-modal')">OK</button>
  </div>
</div>

<div id="confirm-remove-modal" class="modal-overlay">
  <div class="modal-content" style="max-width: 450px;">
    <h3>⚠️ Confirmar Remoção</h3>
    <p style="margin-bottom: 25px;">
      Você tem certeza que deseja remover o membro <strong id="member-to-remove-name" style="color: #e74c3c;"></strong>?
      <br><br>
      Esta ação é permanente e não pode ser desfeita.
    </p>
    <div style="display: flex; justify-content: space-around; gap: 15px;">
      <button class="btn-cancelar" style="flex: 1;" onclick="closeModal('confirm-remove-modal')">Cancelar</button>
      <button id="confirm-remove-button" class="auth-btn" style="flex: 1; background-color: #e74c3c;">Sim, Remover</button>
    </div>
  </div>
</div>
  
  <div id="reactors-modal" class="modal-overlay">
  <div class="modal-content" style="max-width: 400px;">
    <h3 id="reactors-modal-title">Reagiram com...</h3>
    <div id="reactors-modal-list" class="reactors-list">
      </div>
    <button id="remove-my-reaction-btn" class="auth-btn" style="display:none; margin-top: 20px; background-color: #e74c3c;">Remover minha reação</button>
    <button class="btn-cancelar" style="margin-top: 15px;" onclick="closeModal('reactors-modal')">Fechar</button>
  </div>
</div>

<div id="placar-vantagem-modal" class="modal-overlay">
  <div class="modal-content" style="max-width: 600px; width: 95%; max-height: 90vh; display: flex; flex-direction: column;">
    <h3>🏆 Placar do Jogo da Vantagem</h3>
    <p class="modal-description">
      A ordem mostra quem finalizou o desafio primeiro. Parabéns aos mais rápidos!
    </p>

    <div class="placar-content-wrapper">
      <div class="placar-section">
        <h4>✅ Finalizaram o Jogo:</h4>
        <div id="placar-completos" class="placar-lista">
        </div>
      </div>

      <div class="placar-section">
        <h4>🤔 Ainda Faltam:</h4>
        <div id="placar-pendentes" class="placar-lista pendentes">
        </div>
      </div>
    </div>
    <button class="btn-cancelar" style="margin-top: 25px;" onclick="closeModal('placar-vantagem-modal')">Fechar</button>
  </div>
</div>
  
  <div id="confirm-expel-modal" class="modal-overlay">
  <div class="modal-content" style="max-width: 450px;">
    <h3>⚠️ Confirmar Expulsão</h3>
    <p class="modal-description">
      Você tem certeza que deseja <strong>expulsar permanentemente</strong> o membro <strong id="member-to-expel-name" style="color: #e74c3c;"></strong>?
      <br><br>
      Toda a sua pontuação, streaks e dados serão apagados. <strong>Esta ação não pode ser desfeita.</strong>
    </p>
    <div style="display: flex; justify-content: space-around; gap: 15px;">
      <button class="btn-cancelar" style="flex: 1;" onclick="closeModal('confirm-expel-modal')">Cancelar</button>
      <button id="confirm-expel-button" class="auth-btn" style="flex: 1; background-color: #e74c3c;">Sim, Expulsar</button>
    </div>
  </div>
</div>

<div id="confirm-clear-canvas-modal" class="modal-overlay">
  <div class="modal-content" style="max-width: 450px;">
    <h3>⚠️ Confirmar Limpeza</h3>
    <p id="confirm-clear-canvas-text" class="modal-description" style="margin-bottom: 25px;">
      Você tem certeza que deseja apagar permanentemente todo o desenho desta tela?
    </p>
    <div style="display: flex; justify-content: space-around; gap: 15px;">
      <button class="btn-cancelar" style="flex: 1;" onclick="closeModal('confirm-clear-canvas-modal')">Cancelar</button>
      <button id="confirm-clear-canvas-btn" class="auth-btn" style="flex: 1; background-color: #e74c3c;">Sim, Limpar Tudo</button>
    </div>
  </div>
</div>
  
  <div id="update-overlay" class="update-overlay hidden">
  <div class="update-box">
    <div class="update-icon">🔄</div>
    <h2>Atualização Disponível</h2>
    <p>
      Foram implemenadas melhorias importantes na página! Para continuar, por favor, clique no botão abaixo para carregar a versão mais recente.
    </p>
    <button id="perform-update-btn" class="update-btn">Fazer Atualização Agora</button>
  </div>
</div>
  
  <div id="custom-card-popup" class="card-popup-overlay">
  <div class="card-popup-content">
    <h2 id="card-popup-title" class="card-popup-title"></h2>
    <p id="card-popup-message" class="card-popup-message"></p>
	<p class="card-popup-signature">— Grupo Épicos</p>
    <button id="card-popup-close-btn" class="card-popup-close-btn">Entendido!</button>
  </div>
</div>
  
  <div id="loja-modal" class="modal-overlay">
  <div class="modal-content" style="max-width: 90%; width: 1200px; max-height: 90vh; display: flex; flex-direction: column;">
    <div class="painel-header">
      <h2>🏪 Loja do Condomínio</h2>
      <button class="painel-btn btn-fechar" onclick="closeModal('loja-modal')">Fechar</button>
    </div>
    
    <div id="loja-conteudo" class="ociosos-lista-container">
        <div class="painel-section">
          <h3>🏡 Casas Pequenas</h3>
          <div id="catalogo-pequenas" class="catalogo-grid"></div>
        </div>
        <div class="painel-section">
          <h3>🏠 Casas Médias</h3>
          <div id="catalogo-medias" class="catalogo-grid"></div>
        </div>
        <div class="painel-section">
          <h3>🏰 Mansões</h3>
          <div id="catalogo-mansoes" class="catalogo-grid"></div>
        </div>
    </div>
  </div>
</div>

<div id="condominio-view-overlay" class="secao-fullscreen hidden">
  <button class="botao-fechar-secao" onclick="document.getElementById('condominio-view-overlay').classList.add('hidden')">X</button>
  
  <button id="find-my-house-btn" class="botao-info" onclick="findMyHouse()">
    🏠 Encontrar minha casa
  </button>
  
  <div id="condominio-map-wrapper">
    <div id="condominio-map">
        </div>
  </div>
</div>
  
  <div id="inventario-modal" class="modal-overlay">
  <div class="modal-content" style="max-width: 90%; width: 1200px; max-height: 90vh; display: flex; flex-direction: column;">
    <div class="painel-header">
      <h2>🎒 Meu Inventário de Casas</h2>
      <button class="painel-btn btn-fechar" onclick="closeModal('inventario-modal')">Fechar</button>
    </div>

    <p class="modal-description" style="text-align: center;">Aqui estão todas as casas que você já comprou. Clique em uma para defini-la como sua casa principal no condomínio.</p>

    <div id="inventario-conteudo" class="ociosos-lista-container">
        <div id="inventario-grid" class="catalogo-grid">
          </div>
    </div>
  </div>
</div>

<div id="info-moedas-modal" class="modal-overlay">
  <div class="modal-content" style="max-width: 800px; width: 95%; max-height: 90vh; display: flex; flex-direction: column;">
    <div class="painel-header">
      <h2>💰 Como Ganhar Moedas Épicas</h2>
      <button class="painel-btn btn-fechar" onclick="closeModal('info-moedas-modal')">Fechar</button>
    </div>

    <div class="ociosos-lista-container" style="padding-right: 10px;">
      <p class="modal-description" style="text-align: center;">
        As moedas são usadas para comprar casas e outros itens no Condomínio Épicos. Participe das atividades do grupo para acumular sua fortuna!
      </p>
      
      <div class="painel-section">
        <h3>✅ Foco Diário</h3>
        <ul class="reward-list">
          <li class="reward-item">
            <div class="reward">
              <span class="reward-value" id="reward-focoDiario">100</span> Moedas
              <button class="edit-reward-btn hidden" data-key="focoDiario">✏️</button>
            </div>
            <div class="description">Ao marcar seu foco do dia na lista de presença.</div>
          </li>
        </ul>
      </div>

      <div class="painel-section">
        <h3>🏆 Top 5 do Dia (Foco)</h3>
        <ul class="reward-list">
          <li class="reward-item">
            <div class="reward"><span class="reward-rank">🥇 1º Lugar:</span> <span class="reward-value" id="reward-top5Diario_1">25</span> Moedas <button class="edit-reward-btn hidden" data-key="top5Diario_1">✏️</button></div>
            <div class="description">Por ficar um dia em 1º lugar.</div>
          </li>
          <li class="reward-item">
            <div class="reward"><span class="reward-rank">🥈 2º Lugar:</span> <span class="reward-value" id="reward-top5Diario_2">20</span> Moedas <button class="edit-reward-btn hidden" data-key="top5Diario_2">✏️</button></div>
            <div class="description">Por ficar um dia em 2º lugar.</div>
          </li>
          <li class="reward-item">
            <div class="reward"><span class="reward-rank">🥉 3º Lugar:</span> <span class="reward-value" id="reward-top5Diario_3">15</span> Moedas <button class="edit-reward-btn hidden" data-key="top5Diario_3">✏️</button></div>
            <div class="description">Por ficar um dia em 3º lugar.</div>
          </li>
          <li class="reward-item">
            <div class="reward"><span class="reward-rank">⭐ 4º Lugar:</span> <span class="reward-value" id="reward-top5Diario_4">10</span> Moedas <button class="edit-reward-btn hidden" data-key="top5Diario_4">✏️</button></div>
            <div class="description">Por ficar um dia em 4º lugar.</div>
          </li>
          <li class="reward-item">
            <div class="reward"><span class="reward-rank">⭐ 5º Lugar:</span> <span class="reward-value" id="reward-top5Diario_5">5</span> Moedas <button class="edit-reward-btn hidden" data-key="top5Diario_5">✏️</button></div>
            <div class="description">Por ficar um dia em 5º lugar.</div>
          </li>
        </ul>
      </div>
      
      <div class="painel-section">
          <h3>✍️ Interação Social</h3>
          <ul class="reward-list">
            <li class="reward-item">
              <div class="reward"><span class="reward-value" id="reward-postarMural">5</span> Moedas <button class="edit-reward-btn hidden" data-key="postarMural">✏️</button></div>
              <div class="description">Ao publicar uma nova mensagem no Mural.</div>
            </li>
            <li class="reward-item">
              <div class="reward"><span class="reward-value" id="reward-reagirConteudo">1</span> Moedas <button class="edit-reward-btn hidden" data-key="reagirConteudo">✏️</button></div>
              <div class="description">Ao reagir a uma mensagem no Mural ou a um evento no Resumo da Semana.</div>
            </li>
          </ul>
      </div>

      <div class="painel-section">
        <h3>🎮 Jogo da Vantagem</h3>
         <ul class="reward-list">
            <li class="reward-item">
              <div class="reward"><span class="reward-value" id="reward-vitoriaJogoVantagem">50</span> Moedas <button class="edit-reward-btn hidden" data-key="vitoriaJogoVantagem">✏️</button></div>
              <div class="description">Por completar o desafio da semana.</div>
            </li>
        </ul>
        <p class="reward-list-subtitle">Além disso, os 5 mais rápidos da semana recebem um bônus no domingo:</p>
        <ul class="reward-list">
          <li class="reward-item">
            <div class="reward"><span class="reward-rank">🥇 1º Lugar:</span> <span class="reward-value" id="reward-top5Vantagem_1">50</span> Moedas <button class="edit-reward-btn hidden" data-key="top5Vantagem_1">✏️</button></div>
          </li>
          <li class="reward-item">
            <div class="reward"><span class="reward-rank">🥈 2º Lugar:</span> <span class="reward-value" id="reward-top5Vantagem_2">40</span> Moedas <button class="edit-reward-btn hidden" data-key="top5Vantagem_2">✏️</button></div>
          </li>
          <li class="reward-item">
            <div class="reward"><span class="reward-rank">🥉 3º Lugar:</span> <span class="reward-value" id="reward-top5Vantagem_3">30</span> Moedas <button class="edit-reward-btn hidden" data-key="top5Vantagem_3">✏️</button></div>
          </li>
           <li class="reward-item">
            <div class="reward"><span class="reward-rank">⭐ 4º Lugar:</span> <span class="reward-value" id="reward-top5Vantagem_4">20</span> Moedas <button class="edit-reward-btn hidden" data-key="top5Vantagem_4">✏️</button></div>
           </li>
           <li class="reward-item">
            <div class="reward"><span class="reward-rank">⭐ 5º Lugar:</span> <span class="reward-value" id="reward-top5Vantagem_5">10</span> Moedas <button class="edit-reward-btn hidden" data-key="top5Vantagem_5">✏️</button></div>
           </li>
        </ul>
      </div>
	  
	   <div class="painel-section">
        <h3>🏆 Vitória Semanal da Equipe</h3>
        <ul class="reward-list">
          <li class="reward-item">
            <div class="reward">
              <span class="reward-value" id="reward-vitoriaSemanal">500</span> Moedas
              <button class="edit-reward-btn hidden" data-key="vitoriaSemanal">✏️</button>
            </div>
            <div class="description">Cada membro da equipe vencedora da semana recebe este prêmio no domingo.</div>
          </li>
        </ul>
      </div>

    </div>
  </div>
</div>
  
  <div id="confirm-compra-modal" class="modal-overlay">
  <div class="modal-content" style="max-width: 450px;">
    <h3>Confirmar Compra</h3>
    <p id="confirm-compra-texto" class="modal-description" style="margin-bottom: 25px;">
      Você tem certeza?
    </p>
    <div style="display: flex; justify-content: space-around; gap: 15px;">
      <button class="btn-cancelar" style="flex: 1;" onclick="closeModal('confirm-compra-modal')">Cancelar</button>
      <button id="confirm-compra-btn" class="auth-btn" style="flex: 1; background-color: #2ecc71;">Sim, Comprar</button>
    </div>
  </div>
</div>

<div id="ranking-imobiliario-modal" class="modal-overlay">
  <div class="modal-content" style="max-width: 900px; width: 95%; max-height: 90vh; display: flex; flex-direction: column;">
    <div class="painel-header">
      <h2>🏆 Ranking Imobiliário</h2>
      <button class="painel-btn btn-fechar" onclick="closeModal('ranking-imobiliario-modal')">Fechar</button>
    </div>

    <div class="ranking-imobiliario-wrapper">
      <div class="ranking-imobiliario-secao">
        <h4>🥇 Mais Casas</h4>
        <div id="ranking-mais-casas-lista" class="ranking-imobiliario-lista">
          <p>Carregando ranking...</p>
        </div>
      </div>

      <div class="ranking-imobiliario-secao">
        <h4>💰 Maior Valor de Mercado</h4>
        <div id="ranking-maior-valor-lista" class="ranking-imobiliario-lista">
          <p>Carregando ranking...</p>
        </div>
      </div>
    </div>
  </div>
</div>
  
  <div id="user-panel-modal" class="modal-overlay">
  <div class="modal-content" style="max-width: 500px;">
  <div class="painel-header">
    <h2>Painel do Usuário</h2>
  </div>

  <p class="modal-description">Gerencie as configurações da sua conta.</p>
  <button class="painel-btn btn-fechar" onclick="closeModal('user-panel-modal')">Fechar</button>

  <div class="user-panel-actions">
  <button id="btn-abrir-painel-controle" class="user-panel-btn admin hidden">
    👑 Painel de Controle
  </button>
  
  <button id="btn-abrir-gerador-codigo" class="user-panel-btn admin hidden" style="border-color: #2ecc71; color: #2ecc71;">
    💎 Gerador de Códigos
  </button>
  
  <button id="btn-abrir-add-avatar-item" class="user-panel-btn admin hidden" style="border-color: #2ecc71; color: #2ecc71;">
  🖼️ Adicionar Item na Loja de Avatar
</button>

  <button class="user-panel-btn" onclick="openModal('change-password-modal'); closeModal('user-panel-modal');">
    🔑 Alterar minha Senha
  </button>
  <button class="user-panel-btn" onclick="openModal('change-secret-modal'); closeModal('user-panel-modal');">
    🛡️ Alterar Pergunta Secreta
  </button>
  <button id="btn-logout-panel" class="user-panel-btn logout">
    🚪 Sair
  </button>
</div>
  </div>
</div>
  
  <div id="code-generator-modal" class="modal-overlay">
  <div class="modal-content" style="max-width: 500px;">
    <div class="painel-header">
      <h2>Gerador de Códigos Secretos</h2>
      <button class="painel-btn btn-fechar" onclick="closeModal('code-generator-modal')">Fechar</button>
    </div>
    <p class="modal-description">
      Defina um valor de moedas e clique em "Gerar" para criar um código único. Compartilhe o código com o membro que você deseja recompensar.
    </p>

    <div class="painel-section">
      <h3>Gerar Código Único</h3>
      <div class="controle-pontos" style="grid-template-columns: 1fr auto; gap: 15px;">
        <input type="number" id="code-coin-value" class="painel-input" placeholder="Valor em moedas (ex: 500)">
        <button id="generate-code-btn" class="painel-btn btn-adicionar">Gerar</button>
      </div>
      <div style="margin-top: 15px; text-align: left;">
        <input type="checkbox" id="code-restrict-leaders-single" style="margin-right: 8px;">
        <label for="code-restrict-leaders-single">Líderes de equipe não podem resgatar este código.</label>
      </div>
    </div>

    <div id="generated-code-result" class="painel-section hidden">
      <h3>Código Gerado:</h3>
      <div class="copy-field">
        <span id="generated-code-display"></span>
        <button onclick="copyToClipboard(document.getElementById('generated-code-display').innerText, 'Código')">Copiar</button>
      </div>
    </div>

    <div class="painel-section">
      <h3>Gerar Códigos em Lote</h3>
      <p style="font-size:0.9rem; margin-bottom:15px; color:#555;">
        Gere múltiplos códigos com o mesmo valor. Cada membro só poderá resgatar <strong>um</strong> código de cada lote gerado.
      </p>
      <div class="controle-pontos" style="grid-template-columns: 1fr 1fr auto; gap: 15px;">
        <input type="number" id="batch-code-quantity" class="painel-input" placeholder="Quantidade">
        <input type="number" id="batch-code-value" class="painel-input" placeholder="Valor (cada)">
        <button id="generate-batch-code-btn" class="painel-btn btn-adicionar">Gerar Lote</button>
      </div>
      <div style="margin-top: 15px; text-align: left;">
        <input type="checkbox" id="code-restrict-leaders-batch" style="margin-right: 8px;">
        <label for="code-restrict-leaders-batch">Líderes de equipe não podem resgatar este lote.</label>
      </div>
    </div>

    <div id="generated-batch-result" class="painel-section hidden">
      <h3>Lote de Códigos Gerado:</h3>
      <textarea id="batch-codes-result-display" class="painel-input" rows="8" readonly style="margin-bottom: 10px;"></textarea>
      <button class="painel-btn btn-adicionar" style="width:100%" onclick="copyToClipboard(document.getElementById('batch-codes-result-display').value, 'Códigos')">
        Copiar Todos os Códigos
      </button>
    </div>
  </div>
</div>
</div>
  
  <div id="resumo-competicao-modal" class="modal-overlay">
  <div class="modal-content" style="max-width: 600px; width: 95%; max-height: 90vh; display: flex; flex-direction: column;">
    <div class="painel-header">
      <h2>🏆 Resultado da Competição</h2>
      <button class="painel-btn btn-fechar" onclick="closeModal('resumo-competicao-modal')">Fechar</button>
    </div>

    <div id="resumo-competicao-ranking" style="margin-top: 15px; font-size: 1.1rem; text-align: center;">
      </div>
    
    <p class="modal-description" style="text-align: center; margin: 15px 0;">
      Confira abaixo a pontuação detalhada de cada membro na semana que passou.
    </p>

    <div id="resumo-competicao-body" class="ociosos-lista-container" style="padding-right: 15px;">
      </div>
  </div>
</div>

<div id="lista-aniversarios-modal" class="modal-overlay">
  <div class="modal-content" style="max-width: 600px; width: 95%; max-height: 90vh; display: flex; flex-direction: column;">
    <div class="painel-header">
      <h2>🎂 Lista de Aniversários</h2>
      <button class="painel-btn btn-fechar" onclick="closeModal('lista-aniversarios-modal')">Fechar</button>
    </div>
    <p class="modal-description" style="text-align: center;">
      Veja a data de aniversário de todos os membros. Você pode alterar a sua data apenas uma vez.
    </p>
    <div id="lista-completa-aniversarios-container" class="ociosos-lista-container">
      </div>
  </div>
</div>

<div id="confirm-aniversario-modal" class="modal-overlay">
  <div class="modal-content" style="max-width: 450px;">
    <h3>⚠️ Confirmação Necessária</h3>
    <p id="confirm-aniversario-texto" class="modal-description" style="margin-bottom: 25px;">
      </p>
    <div style="display: flex; justify-content: space-around; gap: 15px;">
      <button class="btn-cancelar" style="flex: 1;" onclick="closeModal('confirm-aniversario-modal')">Cancelar</button>
      <button id="confirm-aniversario-btn" class="auth-btn" style="flex: 1; background-color: #2ecc71;">Sim, Confirmar</button>
    </div>
  </div>
</div>
  
  <div id="notificacoes-modal" class="modal-overlay">
  <div class="modal-content" style="max-width: 600px; width: 95%; max-height: 90vh; display: flex; flex-direction: column;">
    <div class="painel-header">
      <h2>📮 Suas Notificações</h2>
      <button class="painel-btn btn-fechar" onclick="fecharEApagarNotificacoes()">Fechar</button>
    </div>

    <p class="modal-description" style="text-align: center;">
      Aqui estão as reações mais recentes nas suas postagens e eventos.
    </p>

    <div id="notificacoes-lista" class="ociosos-lista-container" style="padding-right: 15px;">
      <div class="ociosos-placeholder">Nenhuma notificação nova.</div>
    </div>
  </div>
</div>

<div id="comments-modal" class="modal-overlay">
  <div id="comments-card" class="composer-card" style="height: auto; max-height: 85vh; width: 90%; max-width: 550px;">
    
    <div class="composer-header" style="justify-content: space-between; width: 100%;">
      <h3 id="comments-modal-title" style="margin: 0;">Comentários</h3>
      <button class="close-modal-btn" onclick="closeModal('comments-modal')" title="Fechar">✖</button>
    </div>

    <div id="comments-list-container" class="comments-container" style="border-top: 1px solid rgba(0,0,0,0.1); margin-top: 15px; flex-grow: 1; overflow-y: auto;">
      <div id="comments-list" class="comments-list">
        </div>
    </div>

    <div class="comment-input-area" style="margin-top: 15px; border-top: 1px solid rgba(0,0,0,0.1); padding-top: 15px;">
      <textarea id="comment-textarea-modal" placeholder="Adicionar um comentário..."></textarea>
      <button id="send-comment-btn-modal" title="Enviar Comentário">➤</button>
    </div>

  </div>
</div>

<div id="edit-comment-modal" class="modal-overlay">
  <div class="modal-content" style="max-width: 500px;">
    <h3>Editar Comentário</h3>
    <textarea id="edit-comment-textarea" class="painel-input" rows="5" style="margin-bottom: 15px;"></textarea>
    <div style="display: flex; justify-content: space-around; gap: 15px;">
      <button class="btn-cancelar" style="flex: 1;" onclick="closeModal('edit-comment-modal')">Cancelar</button>
      <button id="save-edit-comment-btn" class="auth-btn" style="flex: 1;">Salvar Alterações</button>
    </div>
  </div>
</div>

<div id="confirm-delete-comment-modal" class="modal-overlay">
  <div class="modal-content" style="max-width: 400px;">
    <h3>Confirmar Exclusão</h3>
    <p style="margin-bottom: 25px;">Você tem certeza que deseja excluir este comentário permanentemente?</p>
    <div style="display: flex; justify-content: space-around; gap: 15px;">
      <button class="btn-cancelar" style="flex: 1;" onclick="closeModal('confirm-delete-comment-modal')">Cancelar</button>
      <button id="confirm-delete-comment-btn" class="auth-btn" style="flex: 1; background-color: #e74c3c;">Excluir</button>
    </div>
  </div>
</div>
  
  <div id="global-options-menu" class="hidden"></div>
  
<div id="avatar-editor-modal" class="modal-overlay">
  <div id="avatar-editor-content" class="modal-content">
    <div class="painel-header">
      <h2>Meu Avatar</h2>
      <button class="painel-btn btn-fechar" onclick="window.tentarFecharEditorAvatar()">Fechar</button>
    </div>
    
    <div class="avatar-main-layout">
      <div class="avatar-preview-coluna">
        <div id="avatar-preview-editor" class="avatar-preview-container">
          </div>
        <div class="avatar-preview-actions">
          <button id="avatar-save-btn" class="auth-btn">Salvar Alterações</button>
          <button id="avatar-gallery-btn" class="user-panel-btn btn-chamativo">Ver Avatares dos Épicos</button>
        </div>
      </div>

      <div class="avatar-itens-coluna">
        <div class="avatar-tabs">
          <button class="avatar-tab-btn ativo" data-tab="inventario">Meu Inventário</button>
          <button class="avatar-tab-btn" data-tab="loja">Loja de Itens</button>
        </div>

        <div id="avatar-tab-inventario" class="avatar-tab-content ativo">
          <div class="avatar-category-tabs-container" id="inventario-category-tabs">
            </div>
          <div class="avatar-category-content-container" id="inventario-category-content">
            </div>
        </div>

        <div id="avatar-tab-loja" class="avatar-tab-content">
          <div class="avatar-category-tabs-container" id="loja-category-tabs">
            </div>
          <div class="avatar-category-content-container" id="loja-category-content">
            </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div id="item-variations-modal" class="modal-overlay">
  <div class="modal-content" style="max-width: 700px;">
      <h3 id="variations-item-name">Variações de Cor</h3>
      <p id="variations-item-description" class="modal-description hidden"></p> 
      <div id="variations-grid" class="variations-grid-container">
          </div>
      <button class="btn-cancelar" style="margin-top: 20px;" onclick="closeModal('item-variations-modal')">Voltar</button>
  </div>
</div>

<div id="avatar-gallery-modal" class="modal-overlay">
  <div class="modal-content" style="max-width: 90%; width: 1200px; max-height: 90vh;">
    <div class="painel-header">
      <h2>Avatares</h2>
      <button class="painel-btn btn-fechar" onclick="closeModal('avatar-gallery-modal')">Fechar</button>
    </div>
    <div id="gallery-grid-container" class="gallery-grid">
      </div>
  </div>
</div>

<div id="confirm-avatar-purchase-modal" class="modal-overlay">
  <div class="modal-content" style="max-width: 450px;">
    <h3>Confirmar Compra</h3>
    <p id="confirm-purchase-text" class="modal-description"></p>
    <div style="display: flex; justify-content: space-around; gap: 15px;">
      <button class="btn-cancelar" style="flex: 1;" onclick="closeModal('confirm-avatar-purchase-modal')">Cancelar</button>
      <button id="confirm-purchase-btn" class="auth-btn" style="flex: 1; background-color: #2ecc71;">Sim, Comprar</button>
    </div>
  </div>
</div>

<div id="confirm-action-modal" class="modal-overlay">
  <div class="modal-content" style="max-width: 450px;">
    <h3 id="confirm-action-title"></h3>
    <p id="confirm-action-text" class="modal-description" style="margin-bottom: 25px;"></p>
    <div style="display: flex; justify-content: space-around; gap: 15px;">
      <button class="btn-cancelar" style="flex: 1;" onclick="closeModal('confirm-action-modal')">Cancelar</button>
      <button id="confirm-action-btn" class="auth-btn" style="flex: 1; background-color: #e74c3c;">Confirmar</button>
    </div>
  </div>
</div>

<div id="avatar-viewer-modal" class="modal-overlay">
  <div class="modal-content" style="background-color: transparent; box-shadow: none; padding: 0;">
    <button class="close-modal-btn" onclick="closeModal('avatar-viewer-modal')" style="z-index: 10001;">✖</button>
    <div id="avatar-viewer-card">
      <div id="avatar-viewer-container">
        </div>
      <h3 id="avatar-viewer-nome"></h3>
    </div>
  </div>
</div>

<div id="editor-avatar-viewer-modal" class="modal-overlay">
  <div class="modal-content" style="background-color: transparent; box-shadow: none; padding: 0;">
    <button class="close-modal-btn" onclick="closeModal('editor-avatar-viewer-modal')">✖</button>
    <div id="avatar-viewer-card">
      <div id="editor-avatar-viewer-container" class="avatar-container-pessoal" style="width: 400px; height: 400px; cursor: default; border-width: 6px;">
        </div>
    </div>
  </div>
</div>

<div id="lupa-conta-gotas" class="hidden">
  <div id="lupa-cor-preview"></div>
  <div class="lupa-reticulo-h"></div>
  <div class="lupa-reticulo-v"></div>
</div>

<div id="add-avatar-item-modal" class="modal-overlay">
  <div class="modal-content" style="max-width: 800px; width: 95%; max-height: 90vh; display: flex; flex-direction: column;">
    <div class="painel-header">
      <h2>🖼️ Adicionar Novo Item à Loja</h2>
      <button class="painel-btn btn-fechar" onclick="closeModal('add-avatar-item-modal')">Fechar</button>
    </div>

    <div class="ociosos-lista-container" style="padding-right: 15px;">
      
      <div class="painel-section">
        <h3>Informações Gerais do Item</h3>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; align-items: center;">
          <input type="text" id="add-item-nome" class="painel-input" placeholder="Nome do Item (Ex: Camiseta Básica)">
          
          <select id="add-item-categoria" class="painel-input">
            <option value="">Selecione a Categoria...</option>
            <option value="corpo">Tons de Pele</option>
            <option value="rosto">Expressões</option>
            <option value="cabelo">Cabelos</option>
            <option value="roupa">Roupas</option>
            <option value="acessorio">Acessórios</option>
            <option value="enfeite_de_parede">Itens Raros e Exclusivos</option>
            <option value="fundo">Fundos</option>
          </select>

          <div id="add-item-subcategoria-container" class="hidden">
            <select id="add-item-subcategoria" class="painel-input">
              <option value="">Selecione a Subcategoria...</option>
              <option value="chapeu">Chapéu</option>
              <option value="oculos">Óculos</option>
              <option value="colar">Colar</option>
              <option value="bolsa">Bolsa</option>
              <option value="outros">Outros</option>
            </select>
          </div>
          <div style="display: flex; align-items: center; gap: 10px;">
            <input type="checkbox" id="add-item-raro" style="width: 20px; height: 20px;">
            <label for="add-item-raro">Este item é raro/exclusivo?</label>
          </div>
        </div>
        
        <div id="add-item-raro-descricao-container" class="hidden" style="margin-top: 15px;">
          <textarea id="add-item-raro-descricao" class="painel-input" rows="3" placeholder="Descreva a condição para obter este item (Ex: Apenas para líderes, recompensa de evento, etc.)"></textarea>
        </div>
      </div>
      
      <div id="add-item-membros-permitidos-container" class="hidden" style="margin-top: 15px;">
        <h4 style="margin-bottom: 10px; text-align: left;">Membros com Permissão para Comprar:</h4>
        <div id="add-item-membros-lista" style="max-height: 200px; overflow-y: auto; background: rgba(0,0,0,0.05); border-radius: 8px; padding: 10px; text-align: left;">
          </div>
      </div>

      <div class="painel-section">
        <h3>Variações de Cor e Preço</h3>
        <p style="font-size:0.9rem; margin-bottom:15px; color:#555;">Adicione pelo menos uma variação para o item. Você pode adicionar quantas cores quiser.</p>
        
        <div id="add-item-variations-container" style="display: flex; flex-direction: column; gap: 15px;">
          </div>

        <button class="painel-btn btn-adicionar" style="width:100%; margin-top: 20px;" onclick="adicionarCampoVariacao()">+ Adicionar Variação de Cor</button>
      </div>

    </div>
    
    <button id="save-new-avatar-item-btn" class="auth-btn" style="margin-top: 25px; background-color: #2ecc71;">Salvar Novo Item na Loja</button>
  </div>
</div>

<div id="envio-moedas-modal" class="modal-overlay">
  <div class="modal-content" style="max-width: 500px;">
    <div class="painel-header">
      <h2>🎁 Envio de Moedas Diárias</h2>
      <button class="painel-btn btn-fechar" onclick="closeModal('envio-moedas-modal')">Fechar</button>
    </div>
    <p class="modal-description" style="text-align: center;">
      Envie 500 moedas para seus colegas de equipe como um presente diário! Esta ação é gratuita e não desconta moedas de você. Você pode enviar para cada colega uma vez por dia.
    </p>
    <div id="envio-moedas-lista" class="ociosos-lista-container" style="max-height: 250px; text-align: left; padding: 10px;">
      </div>
    <button id="enviar-moedas-btn" class="auth-btn" style="margin-top: 25px; background-color: #2ecc71;">Enviar Moedas</button>
  </div>
</div>

<div id="popup-envio-diario-moedas" class="modal-overlay">
  <div class="card-popup-content">
    <h2 class="card-popup-title">🎁 Presente Diário da Equipe!</h2>
    <p class="card-popup-message">
      Envie 500 moedas para seus colegas de equipe como um presente diário! Esta ação é gratuita e não desconta moedas de você. Você pode enviar para cada colega uma vez por dia.
    </p>
    <div id="envio-moedas-lista-popup" class="ociosos-lista-container" style="max-height: 200px; text-align: left; padding: 10px;">
      </div>
    <button id="enviar-moedas-popup-btn" class="card-popup-close-btn" style="margin-top: 20px; background-color: #2ecc71;">Enviar Presente</button>
  </div>
</div>

<div id="avatar-try-on-modal" class="modal-overlay">
  <div class="modal-content" style="background-color: transparent; box-shadow: none; padding: 0;">
    <button class="close-modal-btn" onclick="closeModal('avatar-try-on-modal')">✖</button>
    <div id="avatar-viewer-card">
      <div id="avatar-try-on-container" class="avatar-container-pessoal" style="width: 400px; height: 400px; cursor: default; border-width: 6px;">
        </div>
      <h3 id="avatar-try-on-nome" style="color: white; text-shadow: 0 2px 5px rgba(0,0,0,0.6);">Pré-visualização</h3>
    </div>
  </div>
</div>

<div id="recompensa-equipe-modal" class="modal-overlay">
  <div class="card-popup-content">
    <h2 class="card-popup-title">🏆 Recompensa Semanal da Equipe!</h2>
    <p class="card-popup-message">
      Reconheça o esforço e a dedicação dos membros da sua equipe nesta semana. Selecione quem você acredita que merece receber um bônus de <strong>5.000 moedas</strong>.
    </p>
    <div id="recompensa-equipe-lista" class="ociosos-lista-container" style="max-height: 250px; text-align: left; padding: 10px;">
      </div>
    <button id="enviar-recompensa-equipe-btn" class="card-popup-close-btn" style="margin-top: 20px; background-color: #2ecc71;">Enviar Recompensas</button>
  </div>
</div>

<div id="recompensa-lideres-modal" class="modal-overlay">
  <div class="card-popup-content">
    <h2 class="card-popup-title">👑 Avaliação de Liderança</h2>
    <p class="card-popup-message">
      Avalie a performance dos Líderes de Equipe nesta semana. Os líderes selecionados receberão <strong>20.000 moedas</strong> e poderão recompensar suas equipes amanhã. Os não selecionados receberão <strong>10.000 moedas</strong>.
    </p>
    <div id="recompensa-lideres-lista" class="ociosos-lista-container" style="max-height: 250px; text-align: left; padding: 10px;">
      </div>
    <button id="enviar-recompensa-lideres-btn" class="card-popup-close-btn" style="margin-top: 20px; background-color: #3498db;">Salvar Avaliação para Domingo</button>
  </div>
</div>

<div id="autores-desenho-modal" class="modal-overlay">
  <div class="modal-content" style="max-width: 500px;">
    <div class="painel-header">
      <h2 id="autores-modal-titulo">Autores do Desenho</h2>
      <button class="painel-btn btn-fechar" onclick="closeModal('autores-desenho-modal')">Fechar</button>
    </div>
    <div id="autores-lista-container" class="ociosos-lista-container" style="max-height: 300px; padding: 10px; text-align: left;">
      </div>
  </div>
</div>

<div id="avaliadores-desenho-modal" class="modal-overlay">
  <div class="modal-content" style="max-width: 500px;">
    <div class="painel-header">
      <h2 id="avaliadores-modal-titulo">Membros que Avaliaram</h2>
      <button class="painel-btn btn-fechar" onclick="closeModal('avaliadores-desenho-modal')">Fechar</button>
    </div>
    <div id="avaliadores-lista-container" class="ociosos-lista-container" style="max-height: 300px; padding: 10px; text-align: left;">
      </div>
  </div>
</div>
  
  <script type="module">
  // Importa e executa todo o seu código de lógica principal
  import "./logica.js";

  // Lógica aprimorada para registrar e atualizar o Service Worker
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('/sw.js')
        .then(registration => {
          console.log('Service Worker registrado com sucesso:', registration);
          // Verifica se há um novo Service Worker esperando para ser ativado
          registration.addEventListener('updatefound', () => {
            const newWorker = registration.installing;
            newWorker.addEventListener('statechange', () => {
              if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                // Se um novo SW foi instalado, mostra um popup para o usuário recarregar
                if (confirm('Uma nova versão está disponível! Deseja recarregar a página agora?')) {
                  window.location.reload();
                }
              }
            });
          });
        })
        .catch(error => {
          console.log('Falha ao registrar Service Worker:', error);
        });
    });

    // Força a verificação de uma nova versão do SW toda vez que a página for carregada
    navigator.serviceWorker.ready.then(registration => {
      registration.update();
    });
  }
</script>
  
</body>
</html>
